# ============================================================================
# yazi.toml - yaziメイン設定
# ============================================================================

[manager]
# 隠しファイルを表示
show_hidden = true

# ソート設定
sort_by = "natural"
sort_dir_first = true
sort_reverse = false
sort_sensitive = false

# レイアウト
ratio = [1, 3, 4]
linemode = "size"

[preview]
# プレビュー設定
max_width = 1000
max_height = 1000
cache_dir = ""

# 画像プレビュー
image_quality = 75

[opener]
# エディタ（neovim）
edit = [
  { run = 'nvim "$@"', block = true, for = "unix" },
]

# ファイルを開く
open = [
  { run = 'open "$@"', desc = "Open with default app", for = "macos" },
]

# フォルダを開く
reveal = [
  { run = 'open -R "$@"', desc = "Reveal in Finder", for = "macos" },
]

[open]
rules = [
  # テキストファイル
  { name = "*.md", use = "edit" },
  { name = "*.txt", use = "edit" },
  { name = "*.json", use = "edit" },
  { name = "*.yaml", use = "edit" },
  { name = "*.yml", use = "edit" },
  { name = "*.toml", use = "edit" },
  { name = "*.lua", use = "edit" },
  { name = "*.sh", use = "edit" },
  { name = "*.zsh", use = "edit" },
  { name = "*.py", use = "edit" },
  { name = "*.go", use = "edit" },
  { name = "*.rs", use = "edit" },
  { name = "*.js", use = "edit" },
  { name = "*.ts", use = "edit" },
  { name = "*.tsx", use = "edit" },
  { name = "*.jsx", use = "edit" },
  { name = "*.html", use = "edit" },
  { name = "*.css", use = "edit" },
  { name = "*.vim", use = "edit" },

  # MIME タイプ
  { mime = "text/*", use = "edit" },
  { mime = "application/json", use = "edit" },

  # フォールバック
  { name = "*", use = "open" },
]

[tasks]
# 並列タスク数
micro_workers = 10
macro_workers = 25
bizarre_retry = 5

[plugin]
# プラグインプリロード
preloaders = [
  { name = "*", cond = "!mime", run = "mime", multi = true, prio = "high" },
]
